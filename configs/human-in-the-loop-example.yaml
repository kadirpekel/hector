# Human-in-the-Loop Example Configuration
# Demonstrates tool approval and interactive workflows with A2A Protocol compliance

# LLM Configuration
llms:
  gpt-4o:
    type: openai
    model: gpt-4o
    api_key: ${OPENAI_API_KEY}
    temperature: 0.3
    max_tokens: 4096

# Tool Configurations with Approval Settings
tools:
  # Dangerous tool - requires approval
  execute_command:
    type: command
    enabled: true
    enable_approval: true  # ‚≠ê Enable human-in-the-loop approval
    approval_prompt: |
      ‚ö†Ô∏è  Command Execution Request
      
      Command: {input}
      
      This will execute on the server. Do you approve?
    allowed_commands:
      - "ls"
      - "pwd"
      - "git"
      - "npm"
      - "rm"
      - "find"
      - "wc"
    working_directory: "./"
    max_execution_time: "30s"
  
  # File operations - require approval for writes/deletes
  write_file:
    type: write_file
    enabled: true
    enable_approval: true  # ‚≠ê Require approval for file writes
    approval_prompt: "Write file: {input}?"
    max_file_size: 1048576  # 1MB
    working_directory: "./"
  
  delete_file:
    type: delete_file
    enabled: true
    enable_approval: true  # ‚≠ê Require approval for deletions
    approval_prompt: |
      üóëÔ∏è  File Deletion Request
      
      Delete: {input}
      
      This action cannot be undone. Approve?
    working_directory: "./"
  
  # Safe tools - no approval needed
  read_file:
    type: read_file
    enabled: true
    enable_approval: false  # Safe operation - no approval needed
    max_file_size: 10485760  # 10MB
    working_directory: "./"
  
  grep_search:
    type: grep_search
    enabled: true
    enable_approval: false  # Safe read-only operation
    max_results: 1000
    context_lines: 2
    working_directory: "./"

# Agent Configuration
agents:
  assistant:
    name: "Interactive Assistant"
    description: "Assistant with human-in-the-loop tool approval"
    llm: "gpt-4o"
    
    reasoning:
      engine: "chain-of-thought"
      enable_streaming: true
      max_iterations: 30
      enable_thinking_display: true
    
    # Task configuration for human-in-the-loop
    task:
      backend: "memory"  # Use "sql" for persistence across restarts
      worker_pool: 5
      input_timeout: 600  # Wait up to 10 minutes for user response (A2A INPUT_REQUIRED state)
    
    tools:
      - "execute_command"
      - "write_file"
      - "delete_file"
      - "read_file"
      - "grep_search"
    
    prompt:
      system_prompt: |
        You are a helpful assistant with access to file system and command execution tools.
        
        IMPORTANT: Some tools require user approval before execution. When you want to use
        a tool that requires approval:
        
        1. The system will automatically pause execution
        2. Request user approval with tool details
        3. Wait for user to approve or deny the operation
        4. Resume execution based on user's decision
        
        Always explain what you're going to do before using potentially dangerous tools.

# Server Configuration
global:
  a2a_server:
    host: "0.0.0.0"
    port: 8080
    preferred_transport: "json-rpc"

