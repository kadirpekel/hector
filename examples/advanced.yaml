# Hector - Advanced Configuration
# Enterprise-grade configuration with autonomous workflows and advanced features

version: "1.0"
name: "hector-advanced"
description: "Advanced Hector configuration with autonomous workflows and enterprise features"

# Global settings
global:
  logging:
    level: "debug"
    format: "json"
    output: "stdout"
  performance:
    max_concurrency: 16
    timeout: "60m"

# Service configurations (direct access, no providers wrapper)
llms:
  ollama-main:
    type: "ollama"
    model: "llama3.2"
    host: "http://localhost:11434"
    temperature: 0.7
    max_tokens: 4000
    timeout: 120
  
  ollama-analyst:
    type: "ollama"
    model: "llama3.2"
    host: "http://localhost:11434"
    temperature: 0.3
    max_tokens: 3000
    timeout: 120
  
  ollama-creative:
    type: "ollama"
    model: "llama3.2"
    host: "http://localhost:11434"
    temperature: 0.9
    max_tokens: 2000
    timeout: 120
  
  openai-coordinator:
    type: "openai"
    model: "gpt-4o"
    api_key: "${OPENAI_API_KEY}"
    host: "https://api.openai.com/v1"
    temperature: 0.5
    max_tokens: 2000
    timeout: 180

databases:
  qdrant-main:
    type: "qdrant"
    host: "localhost"
    port: 6333
    api_key: "${QDRANT_API_KEY:-}"
    timeout: 60

embedders:
  ollama-embed:
    type: "ollama"
    model: "nomic-embed-text"
    host: "http://localhost:11434"
    dimension: 768
    timeout: 120

# Specialized agents
agents:
  coordinator-agent:
    name: "Coordinator Agent"
    description: "Coordinates complex multi-agent workflows"
    llm: "openai-coordinator"
    database: "qdrant-main"
    embedder: "ollama-embed"
    
    prompt:
      system_prompt: "You are a coordination specialist. Your role is to manage complex workflows, delegate tasks, and ensure optimal resource utilization across multiple agents."
      include_context: true
      include_history: true
      include_tools: true
      max_context_length: 6000
    
    reasoning:
      engine: "dynamic"
      max_iterations: 8
      enable_self_reflection: true
      quality_threshold: 0.9
    
    search:
      models:
        - name: "coordination_docs"
          collection: "coordination"
          default_top_k: 20
          max_top_k: 100
        - name: "workflow_templates"
          collection: "templates"
          default_top_k: 20
          max_top_k: 100
      top_k: 20
      threshold: 0.8

  research-agent:
    name: "Research Agent"
    description: "Advanced research and information gathering"
    llm: "ollama-main"
    database: "qdrant-main"
    embedder: "ollama-embed"
    
    prompt:
      system_prompt: "You are an advanced research specialist. Your goal is to conduct thorough research, validate information, and provide comprehensive analysis."
      include_context: true
      include_history: true
      include_tools: true
      max_context_length: 5000
    
    reasoning:
      engine: "dynamic"
      max_iterations: 6
      enable_self_reflection: true
      quality_threshold: 0.85
    
    search:
      models:
        - name: "research_docs"
          collection: "research"
          default_top_k: 25
          max_top_k: 100
        - name: "academic_papers"
          collection: "academic"
          default_top_k: 25
          max_top_k: 100
        - name: "web_content"
          collection: "web"
          default_top_k: 25
          max_top_k: 100
      top_k: 25
      threshold: 0.7

  analysis-agent:
    name: "Analysis Agent"
    description: "Advanced data analysis and pattern recognition"
    llm: "ollama-analyst"
    database: "qdrant-main"
    embedder: "ollama-embed"
    
    prompt:
      system_prompt: "You are an advanced analysis specialist. Your role is to perform deep analysis, identify patterns, and extract meaningful insights from complex data."
      include_context: true
      include_history: true
      include_tools: true
      max_context_length: 4000
    
    reasoning:
      engine: "dynamic"
      max_iterations: 5
      enable_self_reflection: true
      quality_threshold: 0.9
    
    search:
      models:
        - name: "analysis_data"
          collection: "analysis"
          default_top_k: 15
          max_top_k: 100
        - name: "statistical_data"
          collection: "statistics"
          default_top_k: 15
          max_top_k: 100
      top_k: 15
      threshold: 0.8

  creative-agent:
    name: "Creative Agent"
    description: "Creative problem solving and innovation"
    llm: "ollama-creative"
    database: "qdrant-main"
    embedder: "ollama-embed"
    
    prompt:
      system_prompt: "You are a creative specialist. Your role is to generate innovative solutions, creative approaches, and out-of-the-box thinking."
      include_context: true
      include_history: true
      include_tools: true
      max_context_length: 3000
    
    reasoning:
      engine: "dynamic"
      max_iterations: 4
      enable_self_reflection: true
      quality_threshold: 0.7
    
    search:
      models:
        - name: "creative_docs"
          collection: "creative"
          default_top_k: 10
          max_top_k: 50
        - name: "inspiration"
          collection: "inspiration"
          default_top_k: 10
          max_top_k: 50
      top_k: 10
      threshold: 0.6

# Workflow configurations
workflows:
  autonomous-research:
    name: "Autonomous Research Workflow"
    description: "AI-driven autonomous research and analysis"
    mode: "autonomous"
    
    agents:
      - "research-agent"
      - "analysis-agent"
      - "creative-agent"
    
    shared:
      memory:
        type: "in-memory"
      cache:
        type: "in-memory"
        ttl: "2h"
    
    execution:
      autonomous:
        goal: "Conduct comprehensive research and analysis on the given topic"
        strategy: "dynamic"
        max_iterations: 10
        coordinator_llm: "openai-coordinator"
        termination_conditions:
          max_duration: "45m"
          quality_threshold: 0.9
          max_iterations: 10
    
    settings:
      max_concurrency: 4
      timeout: "45m"
      retry_policy:
        max_retries: 5
        backoff: "10s"

  structured-analysis:
    name: "Structured Analysis Workflow"
    description: "Structured multi-phase analysis workflow"
    mode: "dag"
    
    agents:
      - "research-agent"
      - "analysis-agent"
      - "creative-agent"
    
    shared:
      memory:
        type: "in-memory"
      cache:
        type: "in-memory"
        ttl: "1h"
    
    execution:
      dag:
        steps:
          - name: "initial_research"
            agent: "research-agent"
            input: "${user_input}"
            output: "research_findings"
          
          - name: "parallel_analysis"
            agent: "analysis-agent"
            input: "${research_findings}"
            output: "analysis_results"
            depends_on: ["initial_research"]
          
          - name: "creative_synthesis"
            agent: "creative-agent"
            input: "${analysis_results}"
            output: "creative_insights"
            depends_on: ["parallel_analysis"]
          
          - name: "final_integration"
            agent: "coordinator-agent"
            input: "${creative_insights}"
            output: "final_report"
            depends_on: ["creative_synthesis"]
    
    settings:
      max_concurrency: 3
      timeout: "30m"
      retry_policy:
        max_retries: 3
        backoff: "5s"

# Tool configuration
tools:
  default_repo: "local"
  repositories:
    - name: "local"
      type: "local"
      description: "Advanced local tools"
      tools:
        - name: "advanced_command_executor"
          type: "command"
          enabled: true
          config:
            command_config:
              allowed_commands: ["ls", "cat", "head", "tail", "pwd", "find", "grep", "git", "curl", "wget", "python", "jq", "awk", "sed", "sort", "uniq", "wc", "tree"]
              working_directory: "./"
              max_execution_time: "60s"
              enable_sandboxing: true
        
        - name: "advanced_search"
          type: "search"
          enabled: true
          config:
            search_config:
              document_stores: ["web-documents", "research-docs", "academic-papers", "analysis-data"]
              default_limit: 20
              max_limit: 200
              enabled_search_types: ["content", "file", "function", "struct", "metadata"]

# Document store configuration
document_stores:
  web-documents:
    name: "Web Documents"
    source: "directory"
    path: "./docs/web"
    include_patterns: ["*.md", "*.txt", "*.html", "*.pdf"]
    watch_changes: true
  
  research-docs:
    name: "Research Documents"
    source: "directory"
    path: "./docs/research"
    include_patterns: ["*.md", "*.txt", "*.pdf", "*.docx"]
    watch_changes: true
  
  academic-papers:
    name: "Academic Papers"
    source: "directory"
    path: "./docs/academic"
    include_patterns: ["*.pdf", "*.tex", "*.bib"]
    watch_changes: true
  
  analysis-data:
    name: "Analysis Data"
    source: "directory"
    path: "./docs/analysis"
    include_patterns: ["*.csv", "*.json", "*.xml", "*.yaml", "*.yml"]
    watch_changes: true
